# Port Traffic Limit - 版本信息

## 当前版本：v2.1

### 更新时间
**2025年10月19日 00:15**

---

## 版本历史

### v2.1 (2025-10-19 00:15)

**新增功能：**
1. ✅ **序号选择支持**
   - 修改端口配置支持序号快速选择
   - 解除端口限速支持序号快速选择
   - 智能识别：数字≤端口总数=序号，否则=端口号
   - 支持输入`all`一键解除所有端口

2. ✅ **配置信息完善**
   - 同步机器配置时显示周期起始日
   - 显示限速值（tc模式）
   - 显示网络接口信息

3. ✅ **界面优化**
   - 所有端口列表显示序号 [1] [2] [3]
   - 查看端口状态时显示序号
   - 主菜单显示版本号和更新时间

**改进项：**
- 用户体验提升：输入序号比输入完整端口号更快捷
- 信息透明度：配置信息更加完整详细
- 操作便捷性：支持多种输入方式（序号/端口号/all）

---

### v2.0 (2025-10-18)

**核心功能：**
1. 多端口流量限制支持
2. JSON配置文件管理
3. 实时流量监控
4. TC限速和阻断两种模式
5. 定时任务自动检查
6. 推送通知集成（Telegram、PushPlus、ServerChan）

---

## 界面展示

### 主菜单（含版本信息）

```bash
========== 端口流量限制管理 v2.1 ==========
最后更新: 2025-10-19 00:15

1) 添加端口配置
2) 修改端口配置
3) 解除端口限速
4) 查看端口配置及流量使用情况
5) 查看定时任务配置
0) 退出
===========================================
请选择操作 [0-5]: 
```

### 启动日志（含版本信息）

```bash
-----------------------------------------------------
2025-10-19 00:20:35 Port Traffic Limit v2.1 (最后更新: 2025-10-19 00:15)
```

---

## 版本标识

在脚本头部定义：

```bash
SCRIPT_VERSION="2.1"
LAST_UPDATE="2025-10-19 00:15"
```

在所有界面使用：

```bash
echo -e "${CYAN}========== 端口流量限制管理 v${SCRIPT_VERSION} ==========${NC}"
echo -e "${YELLOW}最后更新: ${LAST_UPDATE}${NC}"
```

---

## 版本检查

用户可以通过以下方式查看版本：

```bash
# 方法1：运行脚本
bash port_traffic_limit.sh
# 会在启动时显示版本和更新时间

# 方法2：查看头部注释
head -n 10 port_traffic_limit.sh
# 显示：
# #!/bin/bash
# 
# # Port Traffic Limit - 端口流量限制脚本 v2.1
# # 功能：为多个端口设置独立的流量限制（支持JSON配置）
# # 最后更新：2025-10-19 00:15

# 方法3：查看变量
grep "SCRIPT_VERSION" port_traffic_limit.sh
grep "LAST_UPDATE" port_traffic_limit.sh
```

---

## 更新日志格式

每次更新时需要修改：

1. **脚本头部注释**
   ```bash
   # Port Traffic Limit - 端口流量限制脚本 v2.1
   # 最后更新：2025-10-19 00:15
   ```

2. **版本变量**
   ```bash
   SCRIPT_VERSION="2.1"
   LAST_UPDATE="2025-10-19 00:15"
   ```

3. **版本文档**
   - 更新 `版本信息.md`
   - 更新 `README.md` 中的版本号
   - 创建版本更新说明文档

---

## 未来计划

### v2.2 (计划中)
- [ ] 端口流量导出功能（JSON/CSV）
- [ ] 流量统计图表（ASCII）
- [ ] 端口分组管理
- [ ] 流量配额预警（提前通知）

### v2.3 (计划中)
- [ ] Web界面管理
- [ ] 流量历史记录
- [ ] 自定义统计周期（按周/按天）
- [ ] 多服务器集中管理

### v3.0 (远期规划)
- [ ] 完整的Web Dashboard
- [ ] 图形化流量趋势
- [ ] 用户权限管理
- [ ] API接口支持

---

## 兼容性

| 系统 | 支持版本 | 测试状态 |
|------|---------|---------|
| Ubuntu | 18.04+ | ✅ 已测试 |
| Debian | 9+ | ✅ 已测试 |
| CentOS | 7+ | ✅ 已测试 |
| RHEL | 7+ | ✅ 已测试 |

**依赖要求：**
- bash 4.0+
- jq 1.5+
- iptables
- tc (iproute2)
- bc

---

## 版本命名规则

采用语义化版本号：`MAJOR.MINOR.PATCH`

- **MAJOR（主版本号）**：重大架构变更或不兼容更新
- **MINOR（次版本号）**：新功能添加，向后兼容
- **PATCH（修订号）**：Bug修复和小改进

**示例：**
- `1.0.0` → 初始版本（单端口）
- `2.0.0` → 多端口支持（架构变更）
- `2.1.0` → 序号选择功能（新功能）
- `2.1.1` → Bug修复（小改进）

---

## 获取最新版本

```bash
# GitHub仓库
git clone https://github.com/ypq123456789/TrafficCop.git

# 直接下载
wget https://raw.githubusercontent.com/ypq123456789/TrafficCop/main/port_traffic_limit.sh

# 检查版本
bash port_traffic_limit.sh --version  # 计划添加
```

---

## 技术支持

**问题反馈：**
- GitHub Issues: https://github.com/ypq123456789/TrafficCop/issues
- 邮件支持: （待添加）

**更新通知：**
- Watch GitHub仓库获取更新通知
- 关注README.md的版本历史

---

**当前版本：** v2.1  
**更新时间：** 2025-10-19 00:15  
**状态：** ✅ 稳定版本
